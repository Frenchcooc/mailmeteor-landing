<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

{%- include head.html -%}

<body>

  {%- include default.header.html -%}

  {{ content }}

  {%- include default.footer.html -%}

  {% if page.stripe == "popover" %}

  <script>
    // Enabling Stripe popovers
    $(function () {
      $('[data-toggle="popover"]').popover()
    })

    /**
    * Plan confirmation modal handler
    */

    function planConfirmationModal (event) {
      var button = $(event.relatedTarget) // Button that triggered the modal
      var planId = button.data('checkout-plan-id') // Extract info from data-* attributes
      // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
      // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
      var modal = $(this)
      modal.find('input.checkout-plan-id').val(planId)
      console.log(planId)
    }

    $('#activeIndidualModal').on('show.bs.modal', planConfirmationModal)
    $('#activeEnterpriseModal').on('show.bs.modal', planConfirmationModal)

    $(function () {
      $('#pricing-enterprise-select').change(function () {

        let priceHTML = ' <small style="font-size:50%;">$</small><span id="enterprise-plan-price">' + this.value + '</span><sup>.99 /year</sup>'
        let planID = $("#pricing-enterprise-select option:selected").attr('data-checkout-plan-id')
        let buttonID = $('#enterprise-plan-button').value

        $('#enterprise-plan').html(priceHTML)

        if (!planID) {
          $('#enterprise-plan-button').html('Contact us');
          $('#enterprise-plan-button').removeAttr('data-checkout-plan-id');
          $('#enterprise-plan-button').removeAttr('data-target')
          $('#enterprise-plan-button').attr('onclick', "location.href='https://support.mailmeteor.com/help/contact-support'")
        }
        else {
          $('#enterprise-plan-button').html('Buy now');
          $('#enterprise-plan-button').attr('data-target', '#activeEnterpriseModal')
          $('#enterprise-plan-button').removeAttr('onclick')
          $('#enterprise-plan-button').attr('data-checkout-plan-id', planID)
        }
      });
    });

  </script>

  {% endif %}
</body>

</html>