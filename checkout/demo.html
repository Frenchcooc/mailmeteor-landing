<!DOCTYPE html>
<!-- Load Stripe.js on your website. -->
<script src="https://js.stripe.com/v3"></script>

<!-- Create a button that your customers click to complete their purchase. Customize the styling to suit your branding. -->

<button
  style="background-color:#6772E5;color:#FFF;padding:8px 12px;border:0;border-radius:4px;font-size:1em"
  class="stripe-checkout"
  data-stripe-plan="monthly-euro"
  data-stripe-plan-id="plan_F5wdsqE4qJ4LPH"
  role="link"
>
  Monthly booster $4,99
</button>

<button
  style="background-color:#6772E5;color:#FFF;padding:8px 12px;border:0;border-radius:4px;font-size:1em"
  class="stripe-checkout"
  data-stripe-plan="yearly-dollar"
  data-stripe-plan-id="plan_F5wbHFAyliGUPU"
  role="link"
>
  Yearly $24,95
</button>

<button
  style="background-color:#6772E5;color:#FFF;padding:8px 12px;border:0;border-radius:4px;font-size:1em"
  class="stripe-checkout"
  data-stripe-plan="enterprise-dollar"
  data-stripe-plan-id="plan_F5wfQunLALF29C"
  role="link"
>
  Enterprise $199,60
</button>

<div id="error-message"></div>

<script>
  var stripe = Stripe('pk_live_U2xwsrlYPffCBwDlCj988OUO00cjhcrOSN')
  var checkoutButtons = document.getElementsByClassName('stripe-checkout')

  for (var i = 0; i < checkoutButtons.length; i++) {
    checkoutButtons[i].addEventListener('click', function() {
      var plan = 'plan_F4cImcnbw08hUP'
      if (this && this.getAttribute('data-stripe-plan-id')) {
        plan = this.getAttribute('data-stripe-plan-id')
      }

      stripe
        .redirectToCheckout({
          items: [{ plan: plan, quantity: 1 }],

          // Do not rely on the redirect to the successUrl for fulfilling
          // purchases, customers may not always reach the success_url after
          // a successful payment.
          // Instead use one of the strategies described in
          // https://stripe.com/docs/payments/checkout/fulfillment
          successUrl: 'https://mailmeteor.com/checkout/success',
          cancelUrl: 'https://mailmeteor.com/checkout/canceled'
        })
        .then(function(result) {
          if (result.error) {
            // If `redirectToCheckout` fails due to a browser or network
            // error, display the localized error message to your customer.
            var displayError = document.getElementById('error-message')
            displayError.textContent = result.error.message
          }
        })
    })
  }
</script>
