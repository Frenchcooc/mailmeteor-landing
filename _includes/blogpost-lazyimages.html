{% comment %}
    Version 1.1.0
        https://github.com/allejo/jekyll-toc

    "...like all things liquid - where there's a will, and ~36 hours to spare, there's usually a/some way" ~jaybe

    Usage:
        {% include lazyimages.html html=content %}

    Parameters:
        * html         (string) - the HTML of compiled markdown generated by kramdown in Jekyll

    Output:
        The HTML content compiled by kramdown with images tag updated to be load lazyly.
{% endcomment %}
{%- assign excerpt = include.html | split: '<img src="' -%}
{%- for e in excerpt -%}
	{%- if forloop.first == true -%}
		{{ e }}
	{%- else -%}
		{%- assign f = e | split: '"' -%}
		{%- assign url = f | first -%}
		{%- assign rest = f | shift | join: '"' -%}
		<img src="{{ url }}" loading="lazy"{{ rest }}
	{%- endif -%}
{%- endfor -%}